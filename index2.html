<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Portmore Empire Shop - Quality Electronics & Services</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Your trusted destination for quality electronics and professional repair services">
  <meta name="theme-color" content="#1976d2">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Portmore Shop">
  
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- iOS icons -->
  <link rel="apple-touch-icon" href="icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180x180.png">
  <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-167x167.png">
  
  <!-- iOS splash screens -->
  <link rel="apple-touch-startup-image" href="splash/apple-splash-2048-2732.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="splash/apple-splash-1668-2388.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="splash/apple-splash-1536-2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="splash/apple-splash-1125-2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="splash/apple-splash-828-1792.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="icons/favicon.ico" type="image/x-icon">
  
  <!-- App installation prompt -->
  <style>
    #installPrompt {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      padding: 15px 25px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      text-align: center;
    }
    #installPrompt button {
      margin: 0 5px;
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #installPrompt .install-btn {
      background: #a4d85f;
      color: white;
    }
    #installPrompt .dismiss-btn {
      background: #f5f5f5;
      color: #333;
    }
  </style>
</head>
<body>
  <nav class="nav-container">
    <div class="navbar">
      <a href="index2.html" class="logo">
        <i class="fas fa-laptop-house"></i> Portmore Empire Shop
      </a>
      <button class="mobile-menu-btn" onclick="toggleMenu()">☰</button>
      <div class="nav-links">
        <a href="#laptops"><i class="fas fa-laptop"></i> Laptops</a>
        <a href="#phones"><i class="fas fa-mobile-alt"></i> Phones</a>
        <a href="#services"><i class="fas fa-tools"></i> Services</a>
        <a href="#electronics"><i class="fas fa-microchip"></i> Electronics</a>
        <a href="#contact"><i class="fas fa-envelope"></i> Contact</a>
      </div>
    </div>
  </nav>

  <!-- Enhanced Hero Section -->
  <div class="hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <div class="hero-text">
        <h1>Welcome to Portmore Shop</h1>
        <p class="hero-subtitle">Your Trusted Partner for Quality Electronics & Professional Services</p>
        <div class="hero-features">
          <div class="hero-feature">
            <i class="fas fa-check-circle"></i>
            <span>Quality Tested Products</span>
          </div>
          <div class="hero-feature">
            <i class="fas fa-shield-alt"></i>
            <span>Warranty Available</span>
          </div>
          <div class="hero-feature">
            <i class="fas fa-tags"></i>
            <span>Best Market Prices</span>
          </div>
        </div>
        <div class="hero-buttons">
          <a href="#services" class="btn btn-primary">Explore Services</a>
          <a href="#contact" class="btn btn-secondary">Get in Touch</a>
        </div>
      </div>
      <div class="hero-image">
        <img src="hero-devices.png" alt="Featured Electronics">
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Featured Categories -->
    <div class="featured-categories">
      <h2>Browse Categories</h2>
      <div class="category-grid">
        <a href="#laptops" class="category-card">
          <i class="fas fa-laptop"></i>
          <h3>Laptops</h3>
          <p>Quality refurbished laptops</p>
        </a>
        <a href="#phones" class="category-card">
          <i class="fas fa-mobile-alt"></i>
          <h3>Phones</h3>
          <p>Latest smartphones</p>
        </a>
        <a href="#services" class="category-card">
          <i class="fas fa-tools"></i>
          <h3>Repairs</h3>
          <p>Professional repair services</p>
        </a>
        <a href="#accessories" class="category-card">
          <i class="fas fa-headphones"></i>
          <h3>Accessories</h3>
          <p>Quality accessories</p>
        </a>
      </div>
    </div>

    <!-- Special Offers Banner -->
    <div class="offers-section">
      <div class="offer-card">
        <div class="offer-content">
          <i class="fas fa-percentage"></i>
          <h3>Special Discount</h3>
          <p>Get up to 20% off on selected laptops</p>
          <a href="#laptops" class="btn-small">View Offers</a>
        </div>
      </div>
      <div class="offer-card">
        <div class="offer-content">
          <i class="fas fa-tools"></i>
          <h3>Repair Services</h3>
          <p>Professional repair with warranty</p>
          <a href="#services" class="btn-small">Learn More</a>
        </div>
      </div>
    </div>

    <!-- Featured Products Slider -->
    <div class="featured-products">
      <h2>Featured Products</h2>
      <div class="product-slider">
        <div class="product-card">
          <div class="card-badge">New</div>
          <div class="image-container">
            <img src="laptop.png" alt="HP EliteBook 840 G3" class="product-image">
            <div class="zoom-overlay"></div>
          </div>
          <h3>HP EliteBook 840 G3</h3>
          <div class="stock-status in-stock">
              <i class="fas fa-check-circle"></i> in stock
                <i class="fas fa-check-circle"></i> in stock
          <div class="specs">
            <span><i class="fas fa-memory"></i> 8GB RAM</span>
            <span><i class="fas fa-desktop"></i> 14" FHD (1920x1080)</span>
            <span><i class="fas fa-sd-card"></i> SD Card Reader</span>
            <span><i class="fas fa-tag"></i> EXUK</span>
          </div>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="detailed-specs collapsed">
            <h4>Detailed Specifications:</h4>
            <ul>
              <li><i class="fas fa-microchip"></i> Processor: Intel Core i5-6200U @ 2.3GHz</li>
              <li><i class="fas fa-memory"></i> Memory: 8GB DDR4 RAM</li>
              <li><i class="fas fa-hdd"></i> Storage: 256GB SSD</li>
              <li><i class="fas fa-desktop"></i> Display: 14" 1920x1080 Sure View SVA Display</li>
              <li><i class="fas fa-palette"></i> Graphics: Integrated Intel HD Graphics 520</li>
              <li><i class="fas fa-sd-card"></i> Card Reader: SD/SDHC/SDXC</li>
              <li><i class="fas fa-tag"></i> Condition: EXUK</li>
            </ul>
          </div>
          <div class="price">25,000</div>
          <div class="item-actions">
            <a href="laptop-details-g3.html" class="btn-primary"><i class="fas fa-info-circle"></i> Learn More</a>
            <button onclick="addToCart('HP EliteBook 840 G3', 25000)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('HP EliteBook 840 G3')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>
        <div class="card">
          <div class="card-badge">Popular</div>
          <div class="image-container">
            <img src="laptop2.png" alt="HP EliteBook 840 G2" class="product-image">
            <div class="zoom-overlay"></div>
          </div>
          <h3>HP EliteBook 840 G2</h3>
          <div class="stock-status low-stock">
            <i class="fas fa-exclamation-circle"></i> Low Stock
          </div>
          <div class="specs">
            <span><i class="fas fa-microchip"></i> Intel Core i5-5200U 2.2GHz</span>
            <span><i class="fas fa-memory"></i> 8GB DDR3L RAM</span>
            <span><i class="fas fa-hdd"></i> 256GB SSD</span>
            <span><i class="fas fa-desktop"></i> 14" HD (1366x768)</span>
            <span><i class="fas fa-microchip"></i> Intel HD Graphics 5500</span>
            <span><i class="fas fa-network-wired"></i> Gigabit LAN</span>
            <span><i class="fas fa-battery-full"></i> 50Wh Battery</span>
          </div>
          <button class="see-more-btn" onclick="toggleSpecs(this)">
            <span>See More</span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="detailed-specs collapsed">
            <h4>Detailed Specifications:</h4>
            <ul>
              <li><i class="fas fa-laptop"></i> Design: Clamshell Black, Silver</li>
              <li><i class="fas fa-microchip"></i> Processor: Intel® Core™ i5-5200U @ 2.2 GHz (5th Gen)</li>
              <li><i class="fas fa-desktop"></i> Display: 14" HD (1366 x 768) SVA LED Matt 16:9</li>
              <li><i class="fas fa-memory"></i> Memory: 8GB DDR3L-SDRAM 1600 MHz</li>
              <li><i class="fas fa-hdd"></i> Storage: 256GB SSD</li>
              <li><i class="fas fa-palette"></i> Graphics: Intel® HD Graphics 5500</li>
              <li><i class="fas fa-network-wired"></i> Network: Gigabit Ethernet (10/100/1000 Mbit/s)</li>
              <li><i class="fas fa-bluetooth"></i> Bluetooth: 4.0</li>
              <li><i class="fas fa-battery-full"></i> Battery: 50Wh Lithium Polymer</li>
            </ul>
          </div>
          <div class="price">21,000</div>
          <div class="item-actions">
            <a href="laptop-details.html" class="btn-primary"><i class="fas fa-info-circle"></i> Learn More</a>
            <button onclick="addToCart('HP EliteBook 840 G2', 21000)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('HP EliteBook 840 G2')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>
        <!-- Add more product cards here -->
      </div>
    </div>

    <!-- Why Choose Us Section -->
    <div class="why-choose-us">
      <h2>Why Choose Portmore Shop?</h2>
      <div class="features-grid">
        <div class="feature-card">
          <i class="fas fa-certificate"></i>
          <h3>Quality Guaranteed</h3>
          <p>All products are thoroughly tested and certified for quality</p>
        </div>
        <div class="feature-card">
          <i class="fas fa-hand-holding-usd"></i>
          <h3>Best Prices</h3>
          <p>Competitive prices with flexible payment options</p>
        </div>
        <div class="feature-card">
          <i class="fas fa-headset"></i>
          <h3>Expert Support</h3>
          <p>Professional technical support and guidance</p>
        </div>
        <div class="feature-card">
          <i class="fas fa-shipping-fast"></i>
          <h3>Fast Service</h3>
          <p>Quick repair services and product delivery</p>
        </div>
      </div>
    </div>

    <!-- Featured Products Banner -->
    <div class="featured-banner">
      <div class="banner-content">
        <i class="fas fa-star"></i>
        <span>Special Offers - Up to 20% Off on Selected Items!</span>
        <a href="#contact" class="btn-small">Learn More</a>
      </div>
    </div>

    <div class="intro">
      <h2><i class="fas fa-store"></i> About Us</h2>
      <p>Welcome to Portmore Shop, your trusted destination for quality second-hand and refurbished electronics. We take pride in offering:</p>
      <div class="features-grid">
        <div class="feature-item">
          <i class="fas fa-check-circle"></i>
          <span>Quality Tested Products</span>
        </div>
        <div class="feature-item">
          <i class="fas fa-shield-alt"></i>
          <span>Warranty Available</span>
        </div>
        <div class="feature-item">
          <i class="fas fa-hand-holding-usd"></i>
          <span>Best Market Prices</span>
        </div>
        <div class="feature-item">
          <i class="fas fa-headset"></i>
          <span>Expert Support</span>
        </div>
      </div>
    </div>

    <!-- Laptops Section -->
    <div id="laptops" class="section">
      <h2><i class="fas fa-laptop"></i> Laptops & Computers</h2>
      <div class="products">
        <div class="card">
          <div class="card-badge">Popular</div>
          <img src="laptop2.png" alt="HP Laptop">
          <h3>HP EliteBook 840 G2</h3>
          <div class="stock-status out-stock">
              <i class="fas fa-check-circle"></i> in stock
          </div>
          <div class="specs">
            <span><i class="fas fa-microchip"></i> Intel Core i5-5200U 2.2GHz</span>
            <span><i class="fas fa-memory"></i> 8GB DDR3L RAM</span>
            <span><i class="fas fa-hdd"></i> 256GB SSD</span>
            <span><i class="fas fa-desktop"></i> 14" HD (1366x768)</span>
            <span><i class="fas fa-microchip"></i> Intel HD Graphics 5500</span>
            <span><i class="fas fa-network-wired"></i> Gigabit LAN</span>
            <span><i class="fas fa-battery-full"></i> 50Wh Battery</span>
          </div>
          <button class="see-more-btn" onclick="toggleSpecs(this)">
            <span>See More</span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="detailed-specs collapsed">
            <h4>Detailed Specifications:</h4>
            <ul>
              <li><i class="fas fa-laptop"></i> Design: Clamshell Black, Silver</li>
              <li><i class="fas fa-microchip"></i> Processor: Intel® Core™ i5-5200U @ 2.2 GHz (5th Gen)</li>
              <li><i class="fas fa-desktop"></i> Display: 14" HD (1366 x 768) SVA LED Matt 16:9</li>
              <li><i class="fas fa-memory"></i> Memory: 8GB DDR3L-SDRAM 1600 MHz</li>
              <li><i class="fas fa-hdd"></i> Storage: 256GB SSD</li>
              <li><i class="fas fa-palette"></i> Graphics: Intel® HD Graphics 5500</li>
              <li><i class="fas fa-network-wired"></i> Network: Gigabit Ethernet (10/100/1000 Mbit/s)</li>
              <li><i class="fas fa-bluetooth"></i> Bluetooth: 4.0</li>
              <li><i class="fas fa-battery-full"></i> Battery: 50Wh Lithium Polymer</li>
            </ul>
          </div>
          <div class="price">21,000</div>
          <div class="item-actions">
            <a href="laptop-details.html" class="btn-primary"><i class="fas fa-info-circle"></i> Learn More</a>
            <button onclick="addToCart('HP EliteBook 840 G2', 21000)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('HP EliteBook 840 G2')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>
        <div class="card">
          <img src="monitor.png" alt="Dell Monitor">
          <h3>Dell 24" Monitor</h3>
          <div class="stock-status out-stock">
              <i class="fas fa-check-circle"></i> in stock
          </div>
          <div class="specs">
            <span><i class="fas fa-tv"></i> Full HD</span>
            <span><i class="fas fa-bolt"></i> 75Hz</span>
            <span><i class="fas fa-expand"></i> 24 inch</span>
          </div>
          <div class="price">15,000</div>
          <button class="btn-primary"><i class="fas fa-shopping-cart"></i> Buy Now</button>
        </div>
        <div class="card">
          <div class="card-badge">New</div>
          <img src="desktop.png" alt="Desktop Computer">
          <h3>Custom Desktop PC</h3>
          <div class="stock-status in-stock">
            <i class="fas fa-check-circle"></i> In Stock
          </div>
          <div class="specs">
            <span><i class="fas fa-microchip"></i> Core i7</span>
            <span><i class="fas fa-memory"></i> 16GB RAM</span>
            <span><i class="fas fa-hdd"></i> 512GB SSD</span>
          </div>
          <div class="price">45,000</div>
          <button class="btn-primary"><i class="fas fa-shopping-cart"></i> Buy Now</button>
        </div>
      </div>
    </div>

    <!-- Phones Section -->
    <div id="phones" class="section">
      <h2><i class="fas fa-mobile-alt"></i> Mobile Phones</h2>
      <div class="products">
        <div class="card">
          <div class="card-badge">Best Seller</div>
          <img src="phone.png" alt="iPhone">
          <h3>iPhone 11</h3>
          <div class="specs">
            <span><i class="fas fa-mobile"></i> 128GB</span>
            <span><i class="fas fa-camera"></i> 12MP</span>
            <span><i class="fas fa-battery-full"></i> 100%</span>
          </div>
          <div class="price">45,000</div>
          <button class="btn-primary"><i class="fas fa-shopping-cart"></i> Buy Now</button>
        </div>
        <!-- Add more phone cards here -->
      </div>
    </div>

    <!-- Services Section -->
    <div id="services" class="section services-section">
      <h2><i class="fas fa-tools"></i> Our Professional Services</h2>
      <p class="section-description">We offer comprehensive repair and maintenance services for all your electronic devices. Our expert technicians ensure quality service with warranty.</p>
      
      <div class="services-grid">
        <div class="service-card">
          <div class="service-icon">
            <i class="fas fa-mobile-alt"></i>
          </div>
          <h3>Phone Repair</h3>
          <div class="service-rating">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <span>5.0</span>
          </div>
          <ul class="service-features">
            <li><i class="fas fa-check"></i> Screen Replacement</li>
            <li><i class="fas fa-check"></i> Battery Replacement</li>
            <li><i class="fas fa-check"></i> Water Damage Repair</li>
            <li><i class="fas fa-check"></i> Software Issues</li>
            <li><i class="fas fa-check"></i> Charging socket replacement</li>
          </ul>
          <div class="service-info">
            <div class="info-item">
              <i class="fas fa-clock"></i>
              <span>1-2 Hours</span>
            </div>
            <div class="info-item">
              <i class="fas fa-shield-alt"></i>
              <span>90 Days Warranty</span>
            </div>
          </div>
          <a href="#contact" class="btn-service">Schedule Repair</a>
        </div>

        <div class="service-card">
          <div class="service-icon">
            <i class="fas fa-laptop-medical"></i>
          </div>
          <h3>Laptop Repair</h3>
          <div class="service-rating">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star-half-alt"></i>
            <span>4.8</span>
          </div>
          <ul class="service-features">
            <li><i class="fas fa-check"></i> Hardware Repair</li>
            <li><i class="fas fa-check"></i> OS Installation</li>
            <li><i class="fas fa-check"></i> Data Recovery</li>
            <li><i class="fas fa-check"></i> Screen Replacement</li>
            <li><i class="fas fa-check"></i> Keyboard Repair</li>
          </ul>
          <div class="service-info">
            <div class="info-item">
              <i class="fas fa-clock"></i>
              <span>2-4 Hours</span>
            </div>
            <div class="info-item">
              <i class="fas fa-shield-alt"></i>
              <span>6 Months Warranty</span>
            </div>
          </div>
          <a href="#contact" class="btn-service">Schedule Repair</a>
        </div>

        <div class="service-card featured-service">
          <div class="service-badge">Most Popular</div>
          <div class="service-icon">
            <i class="fas fa-microchip"></i>
          </div>
          <h3>Phone Flashing</h3>
          <div class="service-rating">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <span>5.0</span>
          </div>
          <ul class="service-features">
            <li><i class="fas fa-check"></i> All Brands Support</li>
            <li><i class="fas fa-check"></i> Custom ROM Installation</li>
            <li><i class="fas fa-check"></i> Phone Unlocking</li>
            <li><i class="fas fa-check"></i> Software Updates</li>
            <li><i class="fas fa-check"></i> Performance Optimization</li>
          </ul>
          <div class="service-info">
            <div class="info-item">
              <i class="fas fa-clock"></i>
              <span>30-60 Minutes</span>
            </div>
            <div class="info-item">
              <i class="fas fa-shield-alt"></i>
              <span>30 Days Support</span>
            </div>
          </div>
          <a href="#contact" class="btn-service">Schedule Service</a>
        </div>

        <div class="service-card">
          <div class="service-icon">
            <i class="fas fa-database"></i>
          </div>
          <h3>Data Recovery</h3>
          <div class="service-rating">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <span>4.9</span>
          </div>
          <ul class="service-features">
            <li><i class="fas fa-check"></i> Hard Drive Recovery</li>
            <li><i class="fas fa-check"></i> SSD Data Recovery</li>
            <li><i class="fas fa-check"></i> Phone Data Recovery</li>
            <li><i class="fas fa-check"></i> Deleted File Recovery</li>
            <li><i class="fas fa-check"></i> Secure Data Transfer</li>
          </ul>
          <div class="service-info">
            <div class="info-item">
              <i class="fas fa-clock"></i>
              <span>1-24 Hours</span>
            </div>
            <div class="info-item">
              <i class="fas fa-shield-alt"></i>
              <span>Data Security Guaranteed</span>
            </div>
          </div>
          <a href="#contact" class="btn-service">Get Quote</a>
        </div>
      </div>

      <!-- Service Process -->
      <div class="service-process">
        <h3>Our Service Process</h3>
        <div class="process-steps">
          <div class="process-step">
            <div class="step-icon">
              <i class="fas fa-headset"></i>
            </div>
            <h4>1. Contact Us</h4>
            <p>Reach out through phone, WhatsApp, or visit our shop</p>
          </div>
          <div class="process-step">
            <div class="step-icon">
              <i class="fas fa-search"></i>
            </div>
            <h4>2. Diagnosis</h4>
            <p>Free inspection and detailed problem analysis</p>
          </div>
          <div class="process-step">
            <div class="step-icon">
              <i class="fas fa-tools"></i>
            </div>
            <h4>3. Repair</h4>
            <p>Expert repair with genuine parts</p>
          </div>
          <div class="process-step">
            <div class="step-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <h4>4. Quality Check</h4>
            <p>Thorough testing and quality assurance</p>
          </div>
        </div>
      </div>

      <!-- Service Guarantees -->
      <div class="service-guarantees">
        <div class="guarantee-card">
          <i class="fas fa-award"></i>
          <h4>Expert Technicians</h4>
          <p>Certified and experienced professionals</p>
        </div>
        <div class="guarantee-card">
          <i class="fas fa-shield-alt"></i>
          <h4>Service Warranty</h4>
          <p>Up to 6 months warranty on repairs</p>
        </div>
        <div class="guarantee-card">
          <i class="fas fa-hand-holding-usd"></i>
          <h4>Best Pricing</h4>
          <p>Competitive and transparent pricing</p>
        </div>
        <div class="guarantee-card">
          <i class="fas fa-clock"></i>
          <h4>Quick Service</h4>
          <p>Same-day repair for most issues</p>
        </div>
      </div>
    </div>

    <!-- Electronics Section -->
    <div id="electronics" class="section">
      <h2><i class="fas fa-microchip"></i> Electronics & Accessories</h2>
      <div class="accessories">
        <div class="card">
          <img src="earphones.png" alt="Earphones">
          <h3>Premium Bluetooth pods</h3>
          <div class="specs">
            <span><i class="fas fa-music"></i> Hi-Fi Sound</span>
            <span><i class="fas fa-bluetooth"></i> Wireless</span>
          </div>
          <div class="price">1,500</div>
          <button class="btn-primary">Buy Now</button>
        </div>
      </div>
    </div>

    <!-- Flash Drives Section -->
    <div class="section">
      <h2><i class="fas fa-usb"></i> Flash Drives</h2>
      <div style="text-align:center; margin-bottom: 20px;">
        <input type="text" id="searchBox" placeholder="Search products..." style="width: 20%; padding: 8px; font-size: 1em; border-radius: 5px; border: 1px solid #bbb;">
      </div>
      <div class="item-list">

        <!-- 64GB Flash Drive -->
        <div class="item">
          <img src="toshiba-64gb.png" alt="Toshiba 64GB Flash Drive" class="product">
          <div class="item-details">
            <h3>Flash 64GB</h3>
            <div class="stock-status in-stock">
              <i class="fas fa-check-circle"></i> In Stock
          <div class="detailed-specs collapsed">
            <h4>Detailed Specifications:</h4>
            <ul>
              <li><i class="fas fa-microchip"></i> Processor: Intel Core i5-6200U @ 2.3GHz</li>
              <li><i class="fas fa-memory"></i> Memory: 8GB DDR4 RAM</li>
              <li><i class="fas fa-hdd"></i> Storage: 256GB SSD</li>
              <li><i class="fas fa-desktop"></i> Display: 14" 1920x1080 Sure View SVA Display</li>
              <li><i class="fas fa-palette"></i> Graphics: Integrated Intel HD Graphics 520</li>
              <li><i class="fas fa-sd-card"></i> Card Reader: SD/SDHC/SDXC</li>
              <li><i class="fas fa-tag"></i> Condition: EXUK</li>
            </ul>
          </div>
            </a>
          </div>
        </div>

        <!-- 32GB Flash Drive -->
        <div class="item">
          <img src="toshiba-32gb.png" alt="Toshiba 32GB Flash Drive" class="product">
          <div class="item-details">
            <h3>Flash 32GB</h3>
            <div class="stock-status in-stock">
              <i class="fas fa-times-circle"></i> In stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 32GB Storage</span>
              <span><i class="fas fa-bolt"></i> USB 3.0</span>
            </div>
            <div class="price">900</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Flash 32GB', 900)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Flash 32GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        
        <!-- Add more flash drives with similar structure -->
        <!-- 16GB, 8GB, 4GB, 2GB Flash Drives -->
        <div class="item">
          <img src="toshiba-16gb.png" alt="Toshiba 16GB Flash Drive" class="product">
          <div class="item-details">
            <h3>Flash 16GB</h3>
            <div class="stock-status out-stock">
                <i class="fas fa-check-circle"></i> in stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 16GB Storage</span>
              <span><i class="fas fa-bolt"></i> USB 3.0</span>
            </div>
            <div class="price">750</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Flash 16GB', 750)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Flash 16GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- 8GB Flash Drive -->
        <div class="item">
          <img src="toshiba-8gb.png" alt="Toshiba 8GB Flash Drive" class="product">
          <div class="item-details">
            <h3>Flash 8GB</h3>
            <div class="stock-status out-stock">
                <i class="fas fa-check-circle"></i> in stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 8GB Storage</span>
              <span><i class="fas fa-bolt"></i> USB 3.0</span>
            </div>
            <div class="price">600</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Flash 8GB', 600)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Flash 8GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- 4GB Flash Drive -->
        <div class="item">
          <img src="toshiba-4gb.png" alt="Toshiba 4GB Flash Drive" class="product">
          <div class="item-details">
            <h3>Flash 4GB</h3>
            <div class="stock-status out-stock">
                <i class="fas fa-check-circle"></i> in stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 4GB Storage</span>
              <span><i class="fas fa-bolt"></i> USB 3.0</span>
            </div>
            <div class="price">500</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Flash 4GB', 500)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Flash 4GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- 2GB Flash Drive -->
        <div class="item">
          <img src="toshiba-2gb.png" alt="Toshiba 2GB Flash Drive" class="product">
          <div class="item-details">
            <h3>Flash 2GB</h3>
            <div class="stock-status out-stock">
                <i class="fas fa-check-circle"></i> in stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 2GB Storage</span>
              <span><i class="fas fa-bolt"></i> USB 3.0</span>
            </div>
            <div class="price">400</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Flash 2GB', 400)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Flash 2GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>


        <!-- Similar structure for 8GB, 4GB, and 2GB -->
        <!-- Total Price Display -->
        
      </div>
    </div>

    <!-- Memory Cards Section -->
    <div class="section">
      <h2><i class="fas fa-sd-card"></i> Memory Cards</h2>
      <!-- Search box for Memory Cards -->
      <div style="text-align:center; margin-bottom: 20px;">
        <input type="text" id="mcSearchBox" placeholder="Search memory cards..." style="width: 20%; padding: 8px; font-size: 1em; border-radius: 5px; border: 1px solid #bbb;">
      </div>
      <div class="item-list">
        <!-- 64GB Memory Card -->
        <div class="item">
          <img src="memcard-64gb.png" alt="Memory Card 64GB" class="product">
          <div class="item-details">
            <h3>Memory Card 64GB</h3>
            <div class="stock-status in-stock">
              <i class="fas fa-check-circle"></i> In Stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 64GB Storage</span>
              <span><i class="fas fa-tachometer-alt"></i> Class 10</span>
            </div>
            <div class="price">1,500</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Memory Card 64GB', 1500)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Memory Card 64GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- 32GB Memory Card -->
        <div class="item">
          <img src="memcard-32gb.png" alt="Memory Card 32GB" class="product">
          <div class="item-details">
            <h3>Memory Card 32GB</h3>
            <div class="stock-status out-stock">
                <i class="fas fa-check-circle"></i> in stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 32GB Storage</span>
              <span><i class="fas fa-tachometer-alt"></i> Class 10</span>
            </div>
            <div class="price">900</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Memory Card 32GB', 900)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Memory Card 32GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- 16GB Memory Card -->
        <div class="item">
          <img src="memcard-16gb.png" alt="Memory Card 16GB" class="product">
          <div class="item-details">
            <h3>Memory Card 16GB</h3>
            <div class="stock-status out-stock">
                <i class="fas fa-check-circle"></i> in stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 16GB Storage</span>
              <span><i class="fas fa-tachometer-alt"></i> Class 10</span>
            </div>
            <div class="price">700</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Memory Card 16GB', 700)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Memory Card 16GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- 8GB Memory Card -->
        <div class="item">
          <img src="memcard-8gb.png" alt="Memory Card 8GB" class="product">
          <div class="item-details">
            <h3>Memory Card 8GB</h3>
            <div class="stock-status out-stock">
                <i class="fas fa-check-circle"></i> in stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 8GB Storage</span>
              <span><i class="fas fa-tachometer-alt"></i> Class 10</span>
            </div>
            <div class="price">600</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Memory Card 8GB', 600)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Memory Card 8GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- 4GB Memory Card -->
        <div class="item">
          <img src="memcard-4gb.png" alt="Memory Card 4GB" class="product">
          <div class="item-details">
            <h3>Memory Card 4GB</h3>
            <div class="stock-status out-stock">
                <i class="fas fa-check-circle"></i> in stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 4GB Storage</span>
              <span><i class="fas fa-tachometer-alt"></i> Class 10</span>
            </div>
            <div class="price">500</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Memory Card 4GB', 500)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Memory Card 4GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- 2GB Memory Card -->
        <div class="item">
          <img src="memcard-2gb.png" alt="Memory Card 2GB" class="product">
          <div class="item-details">
            <h3>Memory Card 2GB</h3>
            <div class="stock-status in-stock">
              <i class="fas fa-check-circle"></i> In Stock
            </div>
            <div class="specs">
              <span><i class="fas fa-hdd"></i> 2GB Storage</span>
              <span><i class="fas fa-tachometer-alt"></i> Class 10</span>
            </div>
            <div class="price">400</div>
          </div>
          <div class="item-actions">
            <button onclick="addToCart('Memory Card 2GB', 400)" class="btn-primary"><i class="fas fa-cart-plus"></i> Add to Cart</button>
            <button onclick="addToWishList('Memory Card 2GB')" class="btn-secondary"><i class="fas fa-heart"></i> Add to Wishlist</button>
            <a href="https://wa.me/254748072275" target="_blank" class="whatsapp-btn">
              <i class="fab fa-whatsapp"></i> Chat on WhatsApp
            </a>
          </div>
        </div>

        <!-- Total Price Display -->
        
      </div>
    </div>

    <!-- After Memory Cards Section, before Contact Section -->
    </div>
  </div>

  <!-- Shopping Cart Section -->
  <div class="section cart-section">
    <h2><i class="fas fa-shopping-cart"></i> Your Shopping Cart</h2>
    <div class="cart-container">
      <div class="cart-items-container">
        <ul id="cart-items">
          <!-- Cart items will be added here dynamically -->
        </ul>
      </div>
      <div class="cart-summary">
        <div class="cart-total">
          <span>Total:</span>
          <span id="cart-total">KSH 0</span>
        </div>
        <div class="cart-actions">
          <!-- Removed Pay with M-Pesa and Order via WhatsApp from footer -->
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Cart Section Styles */
    .cart-section {
      background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
      color: white;
      border-radius: 15px;
      margin: 40px auto;
      padding: 30px;
      max-width: 1000px;
    }

    .cart-section h2 {
      color: white;
      text-align: center;
      margin-bottom: 30px;
    }

    .cart-section h2::after {
      background: linear-gradient(90deg, #00ffff, #1976d2);
    }

    .cart-container {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .cart-items-container {
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
    }

    #cart-items {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }

    .cart-item:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .cart-item-name {
      flex: 1;
      font-size: 1em;
      color: white;
    }

    .cart-item-price {
      color: #00ffff;
      font-size: 1em;
      margin: 0 20px;
    }

    .remove-item {
      background: none;
      border: none;
      color: #ff4444;
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .remove-item:hover {
      background: rgba(255, 68, 68, 0.1);
      transform: scale(1.1);
    }

    .cart-summary {
      border-top: 2px solid rgba(255, 255, 255, 0.1);
      padding-top: 20px;
      margin-top: 20px;
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 20px;
      padding: 10px 15px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
    }

    .cart-actions {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .checkout-btn,
    .whatsapp-checkout {
      padding: 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s ease;
      text-decoration: none;
    }

    .checkout-btn {
      background: #00ffff;
      color: black;
    }

    .whatsapp-checkout {
      background: #25d366;
      color: white;
    }

    .checkout-btn:hover,
    .whatsapp-checkout:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    /* Custom Scrollbar for Cart Items */
    .cart-items-container::-webkit-scrollbar {
      width: 6px;
    }

    .cart-items-container::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
    }

    .cart-items-container::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
    }

    .cart-items-container::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* Empty Cart State */
    .cart-empty {
      text-align: center;
      padding: 40px 20px;
      color: rgba(255, 255, 255, 0.6);
    }

    .cart-empty i {
      font-size: 3em;
      margin-bottom: 20px;
      opacity: 0.5;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .cart-section {
        margin: 20px;
        padding: 20px;
      }

      .cart-item {
        flex-direction: column;
        text-align: center;
        gap: 10px;
      }

      .cart-item-price {
        margin: 5px 0;
      }

      .cart-actions {
        grid-template-columns: 1fr;
      }
    }
  </style>

  <!-- Remove the floating cart styles and HTML -->
  <style>
    .floating-cart {
      display: none;
    }
  </style>

  <script>
    // Update the cart display function to handle empty state
    function updateCartDisplay() {
      const cartList = document.getElementById('cart-items');
      const cartTotal = document.getElementById('cart-total');
      
      if (cartList) {
        if (cart.items.length === 0) {
          cartList.innerHTML = `
            <div class="cart-empty">
              <i class="fas fa-shopping-cart"></i>
              <p>Your cart is empty</p>
            </div>
          `;
        } else {
          cartList.innerHTML = cart.items.map((item, index) => `
            <li class="cart-item">
              <span class="cart-item-name">${item.name}</span>
              <span class="cart-item-price">KSH ${item.price.toLocaleString()}</span>
              <button class="remove-item" onclick="removeFromCart(${index})">
                <i class="fas fa-times"></i>
              </button>
            </li>
          `).join('');
        }

        const total = cart.items.reduce((sum, item) => sum + item.price, 0);
        cartTotal.textContent = `KSH ${total.toLocaleString()}`;
      }
    }
  </script>

  <!-- Contact Section -->
  <div id="contact" class="section contact-section">
    <h2><i class="fas fa-envelope"></i> Contact Us</h2>
    <div class="contact-grid">
      <div class="contact-info">
        <div class="contact-item">
          <i class="fas fa-map-marker-alt"></i>
          <div>
            <h3>Location</h3>
            <p>Thiba North, Mwea</p>
          </div>
        </div>
        <div class="contact-item">
          <i class="fas fa-phone"></i>
          <div>
            <h3>Phone</h3>
            <p><a href="tel:0748072275">0748 072 275</a></p>
          </div>
        </div>
        <div class="contact-item">
          <i class="fas fa-envelope"></i>
          <div>
            <h3>Email</h3>
            <p><a href="mailto:hilkartel@gmail.com">hilkartel@gmail.com</a></p>
          </div>
        </div>
        <div class="contact-item">
          <i class="fab fa-whatsapp"></i>
          <div>
            <h3>WhatsApp</h3>
            <p><a href="https://wa.me/254748072275" target="_blank">Chat with us</a></p>
          </div>
        </div>
      </div>
      <div class="business-hours">
        <h3><i class="fas fa-clock"></i> Business Hours</h3>
        <ul>
          <li><span>Monday - Friday:</span> 8:00 AM - 6:00 PM</li>
          <li><span>Saturday:</span> 9:00 AM - 5:00 PM</li>
          <li><span>Sunday:</span> 10:00 AM - 2:00 PM</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="#laptops">Laptops</a></li>
          <li><a href="#phones">Phones</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#electronics">Electronics</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Services</h3>
        <ul>
          <li>Phone Repair</li>
          <li>Laptop Repair</li>
          <li>Phone Flashing</li>
          <li>Data Recovery</li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Contact</h3>
        <ul>
          <li><i class="fas fa-phone"></i> 0748 072 275</li>
          <li><i class="fas fa-envelope"></i> hilkartel@gmail.com</li>
          <li><i class="fas fa-map-marker-alt"></i> Thiba North, Mwea</li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2024 Portmore Shop & Services. All rights reserved.</p>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <button id="backToTop" class="back-to-top" onclick="scrollToTop()">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- Install Prompt -->
  <div id="installPrompt">
    <p>Install Portmore Shop for a better experience!</p>
    <button class="install-btn" id="installButton">Install</button>
    <button class="dismiss-btn" id="dismissButton">Not Now</button>
  </div>

  <!-- PWA Scripts -->
  <script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('ServiceWorker registration successful');
          })
          .catch(err => {
            console.log('ServiceWorker registration failed: ', err);
          });
      });
    }

    // PWA Install Prompt
    let deferredPrompt;
    const installPrompt = document.getElementById('installPrompt');
    const installButton = document.getElementById('installButton');
    const dismissButton = document.getElementById('dismissButton');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installPrompt.style.display = 'block';
    });

    installButton.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === 'accepted') {
          console.log('App installed');
        }
        deferredPrompt = null;
        installPrompt.style.display = 'none';
      }
    });

    dismissButton.addEventListener('click', () => {
      installPrompt.style.display = 'none';
    });

    // Handle iOS standalone mode
    if (window.navigator.standalone) {
      document.documentElement.classList.add('ios-standalone');
    }

    // Mobile Menu Toggle
    function toggleMenu() {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.toggle('active');
    }

    // Back to Top Button
    const backToTopButton = document.getElementById('backToTop');
    window.onscroll = function() {
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        backToTopButton.style.display = 'block';
      } else {
        backToTopButton.style.display = 'none';
      }
    };

    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }
  </script>

  <!-- Cart and Wishlist Functions -->
  <script>
    // Initialize cart and wishlist
    let cart = {
      items: []
    };
    let wishlist = new Set();

    // Add to Cart function
    function addToCart(productName, price) {
      if (typeof price !== 'number' || isNaN(price)) {
        console.error('Invalid price for product:', productName);
        return;
      }
      
      cart.items.push({ 
        name: productName, 
        price: price
      });
      
      updateCartDisplay();
      
      // Show a toast notification
      showToast(`${productName} added to cart!`);
    }

    // Add a toast notification function
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);

      // Trigger animation
      setTimeout(() => toast.classList.add('show'), 100);

      // Remove the toast after 3 seconds
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Update cart display with proper price formatting
    function updateCartDisplay() {
      const cartList = document.getElementById('cart-items');
      const cartTotal = document.getElementById('cart-total');
      
      if (cartList) {
        cartList.innerHTML = cart.items.map((item, index) => `
          <li class="cart-item">
            <span class="cart-item-name">${item.name}</span>
            <span class="cart-item-price">KSH ${item.price.toLocaleString()}</span>
            <button class="remove-item" onclick="removeFromCart(${index})">
              <i class="fas fa-times"></i>
            </button>
          </li>
        `).join('');

        const total = cart.items.reduce((sum, item) => sum + item.price, 0);
        cartTotal.textContent = `KSH ${total.toLocaleString()}`;
      }
    }

    // Initialize quantities to 1
    document.addEventListener('DOMContentLoaded', function() {
      const quantities = document.querySelectorAll('.item-quantity');
      quantities.forEach(input => {
        input.value = 1;
      });
    });

    // Add this before the closing script tag
    function updateStockStatus(productName, status) {
      const statusElement = document.querySelector(`[data-product="${productName}"] .stock-status`);
      if (statusElement) {
        statusElement.className = `stock-status ${status}`;
        let icon = '', text = '';
        switch(status) {
          case 'in-stock':
            icon = '<i class="fas fa-check-circle"></i>';
            text = 'In Stock';
            break;
          case 'low-stock':
            icon = '<i class="fas fa-exclamation-circle"></i>';
            text = 'Low Stock';
            break;
          case 'out-stock':
            icon = '<i class="fas fa-times-circle"></i>';
            text = 'Out of Stock';
            break;
        }
        statusElement.innerHTML = `${icon} ${text}`;
      }
    }

    function removeFromCart(index) {
      cart.items.splice(index, 1);
      updateCartDisplay();
    }

    function checkout() {
      const total = cart.items.reduce((sum, item) => sum + item.price, 0);
      alert(`Proceeding to checkout. Total: KSH ${total}`);
      // Add your checkout logic here
    }

    // Toggle cart visibility
    document.getElementById('toggleCart').addEventListener('click', function() {
      const cartContent = document.querySelector('.cart-content');
      const icon = this.querySelector('i');
      
      if (cartContent.style.display === 'none') {
        cartContent.style.display = 'block';
        icon.className = 'fas fa-chevron-up';
      } else {
        cartContent.style.display = 'none';
        icon.className = 'fas fa-chevron-down';
      }
    });
  </script>

  <style>
    .product-card {
      position: relative;
      padding: 15px;
      transition: all 0.3s ease;
    }

    .image-container {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0 auto;
      overflow: hidden;
      cursor: zoom-in;
    }

    .product-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: transform 0.3s ease;
    }

    .image-container:hover .product-image {
      transform: scale(1.5);
    }

    .zoom-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.1);
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .image-container:hover .zoom-overlay {
      opacity: 1;
    }

    .detailed-specs {
      margin-top: 15px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 5px;
      font-size: 0.9em;
    }

    .detailed-specs h4 {
      margin-bottom: 10px;
      color: #333;
    }

    .detailed-specs ul {
      list-style: none;
      padding: 0;
    }

    .detailed-specs li {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .detailed-specs i {
      color: #1976d2;
      width: 20px;
      text-align: center;
    }

    .specs {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin: 10px 0;
    }

    .specs span {
      font-size: 0.85em;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .specs i {
      color: #1976d2;
    }

    .detailed-specs.collapsed {
      display: none;
    }

    .see-more-btn {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
      background: none;
      border: none;
      color: #1976d2;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      font-size: 0.9em;
      transition: all 0.3s ease;
    }

    .see-more-btn:hover {
      background: #f5f5f5;
    }

    .see-more-btn i {
      transition: transform 0.3s ease;
    }

    .see-more-btn.active i {
      transform: rotate(180deg);
    }

    .item-actions {
      display: flex;
      flex-direction: column;
      gap: 8px !important;
      margin-top: 12px !important;
      width: 150px !important;
      margin-left: auto !important;
      margin-right: auto !important;
    }

    .item-actions button,
    .item-actions a {
      width: 150px !important;
      padding: 6px !important;
      border: none;
      border-radius: 20px !important;
      cursor: pointer;
      font-size: 0.8em !important;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px !important;
      text-decoration: none;
      transition: all 0.3s ease;
      background: rgba(0, 0, 0, 0.8) !important;
      color: white !important;
      border: 1px solid rgba(255, 255, 255, 0.1) !important;
      backdrop-filter: blur(5px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
    }

    .item-actions button:hover,
    .item-actions a:hover {
      background: rgba(0, 0, 0, 0.9) !important;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2) !important;
      border-color: rgba(255, 255, 255, 0.2) !important;
    }

    .item-actions i {
      font-size: 0.75em !important;
      color: #00ffff !important;
    }

    .whatsapp-btn {
      background: rgba(0, 0, 0, 0.8) !important;
      color: white !important;
      border-color: #00ffff !important;
      animation: glitterBlack 1.5s ease-in-out infinite alternate;
    }

    @keyframes glitterBlack {
      from {
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
      }
      to {
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.3),
                    0 0 30px rgba(0, 255, 255, 0.2),
                    0 0 40px rgba(0, 255, 255, 0.1);
      }
    }

    .whatsapp-btn:hover {
      background: rgba(0, 0, 0, 0.9) !important;
      border-color: #00ffff !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3) !important;
    }

    .btn-primary {
      background: rgba(0, 0, 0, 0.8) !important;
      color: white !important;
      border-color: #00ffff !important;
    }

    .btn-primary:hover {
      background: rgba(0, 0, 0, 0.9) !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 255, 255, 0.2) !important;
    }

    .btn-secondary {
      background: rgba(0, 0, 0, 0.8) !important;
      color: white !important;
      border-color: rgba(255, 255, 255, 0.2) !important;
    }

    .btn-secondary:hover {
      background: rgba(0, 0, 0, 0.9) !important;
      border-color: rgba(255, 255, 255, 0.3) !important;
    }

    @media (max-width: 768px) {
      .item-actions {
        width: 120px !important;
      }
      
      .item-actions button,
      .item-actions a {
        width: 120px !important;
        font-size: 0.75em !important;
        padding: 5px !important;
      }
      
      .item-actions i {
        font-size: 0.7em !important;
      }
    }

    /* Stock availability styles */
    .stock-status {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.75em;
      font-weight: 500;
      margin: 8px 0;
    }

    /* Smaller status indicators for memory cards and flash drives */
    .item .stock-status {
      font-size: 0.65em !important;
      padding: 2px 6px !important;
      border-radius: 8px !important;
      margin: 4px 0 !important;
      gap: 3px !important;
    }

    .item .stock-status i {
      font-size: 0.75em !important;
    }

    .in-stock {
      background: rgba(0, 200, 0, 0.1);
      color: #00c853;
      border: 1px solid rgba(0, 200, 0, 0.2);
    }

    .low-stock {
      background: rgba(255, 152, 0, 0.1);
      color: #ff9800;
      border: 1px solid rgba(255, 152, 0, 0.2);
    }

    .out-stock {
      background: rgba(244, 67, 54, 0.1);
      color: #f44336;
      border: 1px solid rgba(244, 67, 54, 0.2);
    }

    .stock-status i {
      font-size: 0.85em;
    }

    /* Mobile adjustments */
    @media (max-width: 768px) {
      .item .stock-status {
        font-size: 0.6em !important;
        padding: 2px 4px !important;
      }
      
      .item .stock-status i {
        font-size: 0.7em !important;
      }
    }
  </style>

  <script>
    // Add zoom functionality
    document.addEventListener('DOMContentLoaded', function() {
      const imageContainers = document.querySelectorAll('.image-container');
      
      imageContainers.forEach(container => {
        const img = container.querySelector('.product-image');
        
        container.addEventListener('mousemove', (e) => {
          const bounds = container.getBoundingClientRect();
          const x = (e.clientX - bounds.left) / bounds.width;
          const y = (e.clientY - bounds.top) / bounds.height;
          
          img.style.transformOrigin = `${x * 100}% ${y * 100}%`;
        });
      });
    });

    function toggleSpecs(button) {
      const detailedSpecs = button.nextElementSibling;
      const icon = button.querySelector('i');
      const text = button.querySelector('span');
      
      detailedSpecs.classList.toggle('collapsed');
      button.classList.toggle('active');
      
      if (detailedSpecs.classList.contains('collapsed')) {
        text.textContent = 'See More';
      } else {
        text.textContent = 'See Less';
      }
    }
  </script>

  <!-- Floating Cart -->
  <div id="floating-cart" class="floating-cart">
    <div class="cart-header">
      <i class="fas fa-shopping-cart"></i>
      <span>Shopping Cart</span>
      <button id="toggleCart" class="toggle-cart">
        <i class="fas fa-chevron-up"></i>
      </button>
    </div>
    <div class="cart-content">
      <ul id="cart-items">
        <!-- Cart items will be added here dynamically -->
      </ul>
      <div class="cart-total">
        <span>Total:</span>
        <span id="cart-total">KSH 0</span>
      </div>
      <div class="cart-actions">
        <button class="checkout-btn" onclick="checkout()">
          <i class="fas fa-credit-card"></i> Checkout
        </button>
        <a href="https://wa.me/254748072275" class="whatsapp-checkout">
          <i class="fab fa-whatsapp"></i> Order via WhatsApp
        </a>
      </div>
    </div>
  </div>

  <style>
    /* Floating Cart Styles */
    .floating-cart {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      background: rgba(0, 0, 0, 0.9);
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      transition: all 0.3s ease;
    }

    .cart-header {
      display: flex;
      align-items: center;
      padding: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      gap: 10px;
    }

    .toggle-cart {
      margin-left: auto;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 5px;
    }

    .cart-content {
      max-height: 300px;
      overflow-y: auto;
      padding: 15px;
    }

    #cart-items {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .cart-item-name {
      flex: 1;
      font-size: 0.9em;
    }

    .cart-item-price {
      color: #00ffff;
      font-size: 0.9em;
    }

    .remove-item {
      background: none;
      border: none;
      color: #ff4444;
      cursor: pointer;
      padding: 5px;
      margin-left: 10px;
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      padding: 15px 0;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-weight: bold;
    }

    .cart-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }

    .checkout-btn,
    .whatsapp-checkout {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 0.9em;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .checkout-btn {
      background: #00ffff;
      color: black;
    }

    .whatsapp-checkout {
      background: #25d366;
      color: white;
    }

    .checkout-btn:hover,
    .whatsapp-checkout:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 255, 255, 0.2);
    }

    /* Custom Scrollbar for Cart */
    .cart-content::-webkit-scrollbar {
      width: 5px;
    }

    .cart-content::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
    }

    .cart-content::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
    }
  </style>

  <style>
    /* Add toast notification styles */
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 0.9em;
      z-index: 1001;
      opacity: 0;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
  </style>

  <!-- Update the checkout button and add payment modal -->
  <div class="cart-actions">
    <button class="checkout-btn" onclick="initiateCheckout()">
      <i class="fas fa-credit-card"></i> Pay with M-Pesa
    </button>
    <a href="#" class="whatsapp-checkout" onclick="sendToWhatsApp(); return false;">
      <i class="fab fa-whatsapp"></i> Order via WhatsApp
    </a>
  </div>

  <!-- Add Payment Modal -->
  <div id="paymentModal" class="payment-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-money-bill-wave"></i> M-Pesa Payment</h3>
        <button class="close-modal" onclick="closePaymentModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="payment-options">
          <h4>Choose Payment Method:</h4>
          <div class="payment-method-tabs">
            <button class="tab-btn active" onclick="switchPaymentMethod('ussd')">
              <i class="fas fa-mobile-alt"></i> Quick USSD
            </button>
            <button class="tab-btn" onclick="switchPaymentMethod('manual')">
              <i class="fas fa-hand-pointer"></i> Manual Payment
            </button>
          </div>

          <!-- USSD Method -->
          <div id="ussdMethod" class="payment-method">
            <div class="phone-input">
              <label for="mpesaNumber">Enter your M-Pesa number:</label>
              <div class="input-group">
                <span class="prefix">+254</span>
                <input type="tel" id="mpesaNumber" placeholder="7XX XXX XXX" 
                       maxlength="12" pattern="[0-12]{12}"
                       oninput="formatPhoneNumber(this)"
                       onkeypress="return onlyNumbers(event)">
              </div>
              <small class="input-hint">Enter 9 digits without leading zero</small>
            </div>
            <div class="payment-details">
              <div class="detail-item">
                <span>Amount to Pay:</span>
                <span class="highlight" id="ussd-amount">KSH 0</span>
              </div>
              <div class="detail-item">
                <span>Till Number:</span>
                <span class="highlight">9005877</span>
              </div>
            </div>
            <button onclick="triggerUSSD()" class="ussd-btn">
              <i class="fas fa-phone"></i> Trigger M-Pesa Payment
            </button>
          </div>

          <!-- Manual Method -->
          <div id="manualMethod" class="payment-method" style="display: none;">
            <div class="payment-instructions">
              <h4>Follow these steps to complete your payment:</h4>
              <ol>
                <li>Go to M-Pesa menu on your phone</li>
                <li>Select "Lipa na M-Pesa"</li>
                <li>Select "Buy Goods and Services"</li>
                <li>Enter Till Number: <strong>9005877</strong></li>
                <li>Enter Amount: <strong><span id="modal-amount">0</span></strong></li>
                <li>Enter your M-Pesa PIN</li>
                <li>Confirm the transaction</li>
              </ol>
            </div>
            <div class="payment-details">
              <div class="detail-item">
                <span>Till Number:</span>
                <span class="highlight">9005877</span>
              </div>
              <div class="detail-item">
                <span>Amount:</span>
                <span class="highlight" id="payment-amount">KSH 0</span>
              </div>
            </div>
          </div>
        </div>
        <div class="payment-confirmation">
          <p>After payment, click the button below to notify us:</p>
          <button onclick="confirmPayment()" class="confirm-btn">
            <i class="fas fa-check-circle"></i> I've Made the Payment
          </button>
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Payment Modal Styles */
    .payment-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      backdrop-filter: blur(5px);
    }

    .modal-content {
      position: relative;
      background: white;
      width: 90%;
      max-width: 500px;
      margin: 50px auto;
      border-radius: 15px;
      box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
      animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes modalSlideIn {
      from {
        transform: translateY(-100px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .modal-header {
      padding: 20px;
      background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
      color: white;
      border-radius: 15px 15px 0 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .modal-header h3 {
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .close-modal {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .close-modal:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: scale(1.1);
    }

    .modal-body {
      padding: 20px;
      color: #333;
    }

    .payment-instructions {
      margin-bottom: 20px;
    }

    .payment-instructions ol {
      padding-left: 20px;
    }

    .payment-instructions li {
      margin: 10px 0;
      line-height: 1.5;
    }

    .payment-details {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
    }

    .detail-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }

    .detail-item:last-child {
      border-bottom: none;
    }

    .highlight {
      color: #1976d2;
      font-weight: bold;
      font-size: 1.1em;
    }

    .payment-confirmation {
      text-align: center;
      margin-top: 20px;
    }

    .confirm-btn {
      background: #00c853;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      font-size: 1em;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 15px auto;
      transition: all 0.3s ease;
    }

    .confirm-btn:hover {
      background: #00b34a;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 200, 83, 0.2);
    }

    @media (max-width: 768px) {
      .modal-content {
        width: 95%;
        margin: 20px auto;
      }
    }
  </style>

  <style>
    /* Add these new styles */
    .payment-method-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .tab-btn {
      flex: 1;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: white;
      color: #333;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .tab-btn.active {
      background: #1976d2;
      color: white;
      border-color: #1976d2;
    }

    .phone-input {
      margin-bottom: 20px;
    }

    .phone-input label {
      display: block;
      margin-bottom: 8px;
      color: #555;
    }

    .input-group {
      display: flex;
      align-items: center;
      border: 1px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
    }

    .prefix {
      background: #f5f5f5;
      padding: 12px;
      color: #555;
      border-right: 1px solid #ddd;
    }

    #mpesaNumber {
      flex: 1;
      padding: 12px;
      border: none;
      outline: none;
      font-size: 1em;
    }

    .input-hint {
      display: block;
      margin-top: 5px;
      color: #666;
      font-size: 0.85em;
    }

    .ussd-btn {
      width: 100%;
      padding: 15px;
      background: #00c853;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
      transition: all 0.3s ease;
    }

    .ussd-btn:hover {
      background: #00b34a;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 200, 83, 0.2);
    }

    .ussd-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
  </style>

  <script>
    // Add these new functions
    function switchPaymentMethod(method) {
      const ussdMethod = document.getElementById('ussdMethod');
      const manualMethod = document.getElementById('manualMethod');
      const tabs = document.querySelectorAll('.tab-btn');
      
      tabs.forEach(tab => tab.classList.remove('active'));
      if (method === 'ussd') {
        ussdMethod.style.display = 'block';
        manualMethod.style.display = 'none';
        tabs[0].classList.add('active');
      } else {
        ussdMethod.style.display = 'none';
        manualMethod.style.display = 'block';
        tabs[1].classList.add('active');
      }
    }

    function formatPhoneNumber(input) {
      // Remove non-numeric characters
      let number = input.value.replace(/\D/g, '');
      
      // Ensure the number doesn't exceed 9 digits
      if (number.length > 9) {
        number = number.slice(0, 9);
      }
      
      // Format the number with spaces after every 3 digits
      if (number.length > 3) {
        number = number.replace(/(\d{3})(\d{0,3})(\d{0,3})/, '$1 $2 $3').trim();
      }
      
      input.value = number;
      
      // Update the trigger button state
      const triggerBtn = document.querySelector('.ussd-btn');
      if (triggerBtn) {
        triggerBtn.disabled = number.replace(/\s/g, '').length !== 9;
      }
    }

    function onlyNumbers(event) {
      // Allow only numbers, backspace, delete, and arrow keys
      const allowedKeys = ['Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 'Tab'];
      if (!allowedKeys.includes(event.key) && !/[0-9]/.test(event.key)) {
        event.preventDefault();
        return false;
      }
      return true;
    }

    function triggerUSSD() {
      const number = document.getElementById('mpesaNumber').value.replace(/\s/g, '');
      const total = cart.items.reduce((sum, item) => sum + item.price, 0);
      
      if (number.length !== 9) {
        showToast('Please enter a valid 9-digit phone number', 'error');
        return;
      }

      // Log the number for debugging
      console.log('Phone number:', number, 'Length:', number.length);

      // Construct the USSD string for M-Pesa payment
      const ussdString = encodeURIComponent(`*247*9005877*${total}#`);
      
      // Try different USSD formats
      const ussdFormats = [
        `tel:${ussdString}`,
        `tel:**${ussdString}`,
        `tel:*${ussdString}`,
        `tel:*334#`
      ];

      // Try each format
      function tryUSSDFormat(index) {
        if (index < ussdFormats.length) {
          console.log('Trying USSD format:', ussdFormats[index]); // Debug log
          window.location.href = ussdFormats[index];
          
          showToast('If USSD dialog didn\'t appear, trying alternate format...', 'info');
          
          setTimeout(() => tryUSSDFormat(index + 1), 1500);
        } else {
          showToast('USSD trigger failed. Please use manual payment method.', 'error');
          switchPaymentMethod('manual');
        }
      }

      tryUSSDFormat(0);
    }

    // Update the phone input HTML to be more explicit about the format
    const phoneInput = document.getElementById('mpesaNumber');
    if (phoneInput) {
      phoneInput.placeholder = '7XX XXX XXX';
      phoneInput.setAttribute('inputmode', 'numeric');
      phoneInput.setAttribute('autocomplete', 'off');
      
      // Add input event listener for real-time validation
      phoneInput.addEventListener('input', function() {
        const number = this.value.replace(/\s/g, '');
        const isValid = number.length === 9;
        
        this.classList.toggle('valid', isValid);
        this.classList.toggle('invalid', !isValid && number.length > 0);
        
        // Update helper text
        const helperText = this.parentElement.querySelector('.input-hint');
        if (helperText) {
          if (number.length === 0) {
            helperText.textContent = 'Enter 9 digits without leading zero';
            helperText.className = 'input-hint';
          } else if (!isValid) {
            helperText.textContent = `${9 - number.length} more digits needed`;
            helperText.className = 'input-hint error';
          } else {
            helperText.textContent = 'Valid phone number';
            helperText.className = 'input-hint success';
          }
        }
      });
    }

    // Add these styles for better input feedback
    const inputStyles = `
      #mpesaNumber.valid {
        border-color: #00c853;
        background-color: #f0fff3;
      }

      #mpesaNumber.invalid {
        border-color: #ff3d00;
        background-color: #fff5f5;
      }

      .input-hint.error {
        color: #ff3d00;
      }

      .input-hint.success {
        color: #00c853;
      }

      .input-group {
        border: 2px solid #ddd;
        transition: all 0.3s ease;
      }

      .input-group:focus-within {
        border-color: #1976d2;
        box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
      }

      #mpesaNumber {
        width: 100%;
        font-size: 1.2em;
        letter-spacing: 1px;
      }

      .prefix {
        font-size: 1.2em;
        color: #666;
        background: #f8f9fa;
        padding: 12px 15px;
        border-right: 2px solid #ddd;
      }
    `;

    // Add the styles to the document
    const styleElement = document.createElement('style');
    styleElement.textContent = inputStyles;
    document.head.appendChild(styleElement);

    // Add function to handle direct M-Pesa menu
    function openMpesaMenu() {
      window.location.href = 'tel:*334#';
    }

    // Update the payment modal to include a direct M-Pesa menu button
    document.querySelector('.payment-options').insertAdjacentHTML('beforeend', `
      <div class="mpesa-menu-option">
        <button onclick="openMpesaMenu()" class="mpesa-menu-btn">
          <i class="fas fa-mobile-alt"></i> Open M-Pesa Menu
        </button>
        <small>If direct payment doesn't work, use this to open M-Pesa menu</small>
      </div>
    `);

    // Add styles for the new button
    const style = document.createElement('style');
    style.textContent = `
      .mpesa-menu-option {
        margin-top: 20px;
        text-align: center;
      }
      
      .mpesa-menu-btn {
        background: #00a884;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 25px;
        font-size: 1em;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
      }
      
      .mpesa-menu-btn:hover {
        background: #008f6f;
        transform: translateY(-2px);
      }
      
      .mpesa-menu-option small {
        display: block;
        margin-top: 8px;
        color: #666;
        font-size: 0.85em;
      }
    `;
    document.head.appendChild(style);

    // Update the showToast function to handle different types
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => toast.classList.add('show'), 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 5000);
    }
  </script>

  <style>
    /* Update Toast Styles for different types */
    .toast.error {
      background: rgba(244, 67, 54, 0.9);
      color: white;
    }

    .toast.info {
      background: rgba(33, 150, 243, 0.9);
      color: white;
    }
  </style>

  <script>
    function initiateCheckout() {
      const modal = document.getElementById('paymentModal');
      const modalAmount = document.getElementById('modal-amount');
      const paymentAmount = document.getElementById('payment-amount');
      const total = cart.items.reduce((sum, item) => sum + item.price, 0);
      
      modalAmount.textContent = `KSH ${total.toLocaleString()}`;
      paymentAmount.textContent = `KSH ${total.toLocaleString()}`;
      modal.style.display = 'block';
    }

    function closePaymentModal() {
      const modal = document.getElementById('paymentModal');
      modal.style.display = 'none';
    }

    function formatCartItems() {
      return cart.items.map(item => 
        `${item.name}: KSH ${item.price.toLocaleString()}`
      ).join('\n');
    }

    function sendToWhatsApp() {
      const total = cart.items.reduce((sum, item) => sum + item.price, 0);
      const items = formatCartItems();
      const message = `New Order:\n\n${items}\n\nTotal: KSH ${total.toLocaleString()}`;
      const encodedMessage = encodeURIComponent(message);
      window.open(`https://wa.me/254748072275?text=${encodedMessage}`, '_blank');
    }

    function confirmPayment() {
      const total = cart.items.reduce((sum, item) => sum + item.price, 0);
      const items = formatCartItems();
      const message = `Payment Confirmation:\n\nI've completed M-Pesa payment for:\n${items}\n\nTotal Amount: KSH ${total.toLocaleString()}\nTill Number: 9005877`;
      const encodedMessage = encodeURIComponent(message);
      
      // Send payment confirmation via WhatsApp
      window.open(`https://wa.me/254748072275?text=${encodedMessage}`, '_blank');
      
      // Show success message
      showToast('Thank you for your payment! We\'ll process your order soon.');
      
      // Clear cart
      cart.items = [];
      updateCartDisplay();
      
      // Close modal
      closePaymentModal();
    }

    // Update showToast function to handle success messages
    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => toast.classList.add('show'), 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 5000);
    }
  </script>

  <style>
    /* Update Toast Styles */
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 0.9em;
      z-index: 1001;
      opacity: 0;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .toast.success {
      background: rgba(0, 200, 83, 0.9);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
  </style>
</body>
</html>
